现在大部分芯片都有systick，它是内核的定时器，操作系统一般都是通过它来产生滴答。gd32vf103的systick是一个64的定时器，可以实现系统计时、比较中断、软件中断等功能。它上电后自动开始自增计数，所以我们不需要做什么配置就可以获取到系统运行的时间。

本文介绍如何使用systick实现毫秒的延时函数delay_1ms(int millis).

参考bumblebee内核数据手册，可以找到systick的介绍，手册中它叫计时器单元（TIMER）。
它的基地址我找了很久找不到，只能看一下官方sdk，值为0xd1000000。它的寄存器如下所示：

0x0和0x4分别是计时单元的低32位和高32位，使用的时候读取然后将他们拼起来即可。

从寄存器中读取的值是计数，我们需要将它转换成时间。在《GD32VF103_User_Manual_CN_V1.2》中复位和时钟单元一章提到AHB时钟4分频后作为systick的时钟。AHB的频率我们是知道的，这样就可以算出来1毫秒需要多少个systick。

SystemCoreClock是系统时钟频率（这里AHB时钟与系统时钟相等），除以4就是systick的时钟频率，即1s的ticks。再除以1000就是1ms的ticks。


有了延时函数，我们就能准确控制代码的执行时间。

下一篇讲讲串口的最小配置，在嵌入式领域串口太重要了，调通它对以后的开发必不可少。
